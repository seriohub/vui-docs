"use strict";(self.webpackChunkvelero_docs=self.webpackChunkvelero_docs||[]).push([[1776],{2203:(e,t,d)=>{d.r(t),d.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"getting-started/configuration/velero-watchdog","title":"WATCHDOG","description":"WATCHDOG Configuration","source":"@site/docs/getting-started/configuration/velero-watchdog.md","sourceDirName":"getting-started/configuration","slug":"/getting-started/configuration/velero-watchdog","permalink":"/docs/getting-started/configuration/velero-watchdog","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Watchdog","sidebar_position":3,"description":"WATCHDOG Configuration"},"sidebar":"tutorialSidebar","previous":{"title":"UI","permalink":"/docs/getting-started/configuration/velero-ui"},"next":{"title":"Core","permalink":"/docs/getting-started/configuration/velero-core"}}');var i=d(4848),r=d(8453);const s={sidebar_label:"Watchdog",sidebar_position:3,description:"WATCHDOG Configuration"},c="WATCHDOG",o={},l=[{value:"Configuration",id:"configuration",level:2},{value:"Apprise Integration \u2013 Draft Documentation",id:"apprise-integration--draft-documentation",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"watchdog",children:"WATCHDOG"})}),"\n",(0,i.jsx)(t.p,{children:"Below are the configurable environment parameters for the UI."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"FIELD"})," is the name of the environment variable to be configured within the ",(0,i.jsx)(t.em,{children:"velero-watchdog-config"})," ConfigMap."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Helm KEY"})," is the related key defined in the Helm chart."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)("div",{class:"table-container",children:(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"FIELD"}),(0,i.jsx)(t.th,{children:"HELM KEY"}),(0,i.jsx)(t.th,{children:"TYPE"}),(0,i.jsx)(t.th,{children:"DEFAULT"}),(0,i.jsx)(t.th,{children:"DESCRIPTION"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"BACKUP_ENABLE"}),(0,i.jsx)(t.td,{children:"watchdogConfig.backupEnable"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Enable watcher for backups without schedule or last backup for each schedule"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"DEBUG"}),(0,i.jsx)(t.td,{children:"watchdogConfig.debug"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"False"})}),(0,i.jsx)(t.td,{children:"View debugging information."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EMAIL_ACCOUNT      *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.emailAccount"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"user name account"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EMAIL_ENABLE       *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.emailEnable"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"False"})}),(0,i.jsx)(t.td,{children:"Enable email notification"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EMAIL_SMTP_SERVER  *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.emailSmtpServer"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"SMTP server"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EMAIL_SMTP_PORT    *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.emailSmtpPort"}),(0,i.jsx)(t.td,{children:"int"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"587"})}),(0,i.jsx)(t.td,{children:"SMTP port"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EMAIL_PASSWORD     *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.emailPassword"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"password account"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EMAIL_RECIPIENTS   *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.emailRecipients"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Email recipients"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"EXPIRES_DAYS_WARNING"}),(0,i.jsx)(t.td,{children:"watchdogConfig.expiresDaysWarning"}),(0,i.jsx)(t.td,{children:"int"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"10"})}),(0,i.jsx)(t.td,{children:"Number of days to backup expiration below which to display a warning about the backup"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"IGNORE_NM_1"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"regex to ignore a namespace or a group of namespaces"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"IGNORE_NM_2"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"regex to ignore a namespace or a group of namespaces"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"IGNORE_NM_3"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"regex to ignore a namespace or a group of namespaces"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"K8S_INCLUSTER_MODE **"}),(0,i.jsx)(t.td,{children:"watchdogConfig.k8SInclusterMode"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"False"})}),(0,i.jsx)(t.td,{children:"Enable in cluster mode"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"K8S_VELERO_NAMESPACE"}),(0,i.jsx)(t.td,{children:"watchdogConfig.k8sVeleroNamespace"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"velero"})}),(0,i.jsx)(t.td,{children:"Name of the namespace where vmware-tanzu/velero is deployed"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"LOG_SAVE"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"False"})}),(0,i.jsx)(t.td,{children:"Save log to files"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"NOTIFICATION_SKIP_COMPLETED"}),(0,i.jsx)(t.td,{children:"watchdogConfig.notificationSkipCompleted"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Skip notification new completed backup"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"NOTIFICATION_SKIP_DELETING"}),(0,i.jsx)(t.td,{children:"watchdogConfig.notificationSkipDeleting"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Skip notification backup deleting"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"NOTIFICATION_SKIP_INPROGRESS"}),(0,i.jsx)(t.td,{children:"watchdogConfig.notificationSkipInProgress"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Skip notification new in progress backup"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"NOTIFICATION_SKIP_REMOVED"}),(0,i.jsx)(t.td,{children:"watchdogConfig.notificationSkipRemoved"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Skip notification backup removed"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"PROCESS_CLUSTER_NAME * **"}),(0,i.jsx)(t.td,{children:"watchdogConfig.processClusterName"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Force the cluster name and it appears in the message"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"PROCESS_LOAD_KUBE_CONFIG *"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Set False if it runs on k8s."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"PROCESS_KUBE_CONFIG"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Path to the kube config file. This is mandatory when the script runs outside the Kubernetes cluster, either in a docker container or as a native script."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"REPORT_BACKUP_ITEM_PREFIX"}),(0,i.jsx)(t.td,{children:"watchdogConfig.reportBackupItemPrefix"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Add a prefix to backup items in reports"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"REPORT_SCHEDULE_ITEM_PREFIX"}),(0,i.jsx)(t.td,{children:"watchdogConfig.reportScheduleItemPrefix"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Add a prefix to schedule items in reports"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"PROCESS_CYCLE_SEC"}),(0,i.jsx)(t.td,{children:"watchdogConfig.processCycleSec"}),(0,i.jsx)(t.td,{children:"Int"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"120"})}),(0,i.jsx)(t.td,{children:"Cycle time (seconds)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"SLACK_CHANNEL      *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.slackChannel"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Channel id where sens the notification"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"SLACK_ENABLE       *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.slackEnable"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Enable Slack notification"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"SLACK_TOKEN        *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.slackToken"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Token for access to Slack via Http API"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"SCHEDULE_ENABLE"}),(0,i.jsx)(t.td,{children:"watchdogConfig.scheduleEnable"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"True"})}),(0,i.jsx)(t.td,{children:"Enable watcher for schedule"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"TELEGRAM_API_TOKEN *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.telegramToken"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Token for access to Telegram bot via Http API"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"TELEGRAM_CHAT_ID   *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.telegramChatId"}),(0,i.jsx)(t.td,{children:"String"}),(0,i.jsx)(t.td,{}),(0,i.jsx)(t.td,{children:"Telegram chat id where send the notifications"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"TELEGRAM_ENABLE    *"}),(0,i.jsx)(t.td,{children:"watchdogConfig.telegramEnable"}),(0,i.jsx)(t.td,{children:"Bool"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"False"})}),(0,i.jsx)(t.td,{children:"Enable telegram notification"})]})]})]})}),"\n",(0,i.jsx)(t.p,{children:"* Mandatory parameters"}),"\n",(0,i.jsx)(t.p,{children:"** Mandatory if it is deployed on cluster"}),"\n",(0,i.jsx)(t.h2,{id:"apprise-integration--draft-documentation",children:"Apprise Integration \u2013 Draft Documentation"}),"\n",(0,i.jsx)(t.p,{children:"This is just a draft to describe the new feature integrating Apprise. A more detailed version will be available soon."}),"\n",(0,i.jsx)(t.p,{children:"Starting from version 0.1.19, Apprise has been introduced as a service for sending notifications. The settings can be managed directly from the app. Once the changes are saved, you can restart the Watchdog from the UI to apply the new user configurations."}),"\n",(0,i.jsxs)(t.p,{children:["To correctly configure the notification delivery services, you can refer to the official Apprise ",(0,i.jsx)(t.a,{href:"https://github.com/caronc/apprise",children:"repository"})]}),"\n",(0,i.jsx)(t.p,{children:"If you are using email notifications, for proper formatting, add &format=markdown to your request."})]})}function a(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,t,d)=>{d.d(t,{R:()=>s,x:()=>c});var n=d(6540);const i={},r=n.createContext(i);function s(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);