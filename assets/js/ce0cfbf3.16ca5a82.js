"use strict";(self.webpackChunkvelero_docs=self.webpackChunkvelero_docs||[]).push([[3653],{3676:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/installation/scenarios/core-cluster-installation","title":"Core Cluster Installation \u2013 Set Up Centralized VUI-Core","description":"Learn how to install and configure VUI-Core for centralized management of multiple Kubernetes clusters. Enable multi-cluster visibility and control through a single Velero UI instance.","source":"@site/docs/getting-started/installation/scenarios/core-cluster.md","sourceDirName":"getting-started/installation/scenarios","slug":"/getting-started/installation/scenarios/core-cluster-installation","permalink":"/docs/getting-started/installation/scenarios/core-cluster-installation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"core-cluster-installation","title":"Core Cluster Installation \u2013 Set Up Centralized VUI-Core","description":"Learn how to install and configure VUI-Core for centralized management of multiple Kubernetes clusters. Enable multi-cluster visibility and control through a single Velero UI instance.","keywords":["VUI","VUI-Core","Velero","Kubernetes","centralized backup","multi-cluster","Velero UI","core cluster installation"],"sidebar_label":"Core","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Single Cluster","permalink":"/docs/getting-started/installation/scenarios/single-cluster-installation"},"next":{"title":"Agent Only","permalink":"/docs/getting-started/installation/scenarios/agent-only-installation"}}');var r=s(4848),i=s(8453);const l={id:"core-cluster-installation",title:"Core Cluster Installation \u2013 Set Up Centralized VUI-Core",description:"Learn how to install and configure VUI-Core for centralized management of multiple Kubernetes clusters. Enable multi-cluster visibility and control through a single Velero UI instance.",keywords:["VUI","VUI-Core","Velero","Kubernetes","centralized backup","multi-cluster","Velero UI","core cluster installation"],sidebar_label:"Core",sidebar_position:3},a="Core Cluster Installation",o={},c=[{value:"Evaluating VUI-Core",id:"evaluating-vui-core",level:2},{value:"Managing NATS Users",id:"managing-nats-users",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Installation",id:"installation",level:2},{value:"Access",id:"access",level:2},{value:"Additional Useful Override Files",id:"additional-useful-override-files",level:2},{value:"Notes",id:"notes",level:2},{value:"LoadBalancer IP Configuration",id:"loadbalancer-ip-configuration",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"core-cluster-installation",children:"Core Cluster Installation"})}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"core-cluster"})," is the ",(0,r.jsx)(n.strong,{children:"only component of the VUI project not released under the Apache 2.0 license"}),". It is a ",(0,r.jsx)(n.strong,{children:"proprietary, closed-source component"}),", distributed under a custom End-User License Agreement (EULA) and available exclusively to active Seriohub sponsors at the required tier.\nPlease make sure to review the applicable licenses before continuing: see the ",(0,r.jsx)(n.a,{href:"/docs/licenses/vui-license",children:"VUI License Overview"})," and the ",(0,r.jsx)(n.a,{href:"/docs/licenses/vui-core-license",children:"VUI-Core License Terms"}),"."]})}),"\n",(0,r.jsxs)(n.p,{children:["Starting from ",(0,r.jsx)(n.strong,{children:"VUI version 0.3.0"}),", the new ",(0,r.jsx)(n.code,{children:"vui-core"})," component is available.",(0,r.jsx)(n.br,{}),"\n","It enables centralized management of multiple remote clusters from a single UI instance.",(0,r.jsx)(n.br,{}),"\n","\ud83d\udc49 ",(0,r.jsx)(n.a,{href:"/blog/vui-0.3.0",children:"Read the announcement"})," and learn more ",(0,r.jsx)(n.a,{href:"/docs/licenses/about-the-project",children:"about the project"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["This scenario sets up a ",(0,r.jsx)(n.strong,{children:"centralized VUI environment"})," using ",(0,r.jsx)(n.strong,{children:"VUI-Core"}),", designed for multi-cluster visibility, coordination, and control."]}),"\n",(0,r.jsx)(n.h2,{id:"evaluating-vui-core",children:"Evaluating VUI-Core"}),"\n",(0,r.jsx)(n.p,{children:"The VUI-Core component is available for evaluation in demo mode for 14 days.\nThis allows you to explore its centralized management features and multi-cluster capabilities before becoming a sponsor."}),"\n",(0,r.jsxs)(n.p,{children:["For any questions, clarifications, or additional information, feel free to ",(0,r.jsx)(n.a,{href:"mailto:info@seriohub.com",children:"get in touch"})," or ",(0,r.jsx)(n.a,{href:"https://github.com/seriohub/vui-ui/issues/new",children:"open a issue"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Before installing, we recommend reviewing the ",(0,r.jsx)(n.a,{href:"/docs/getting-started/software-architecture/multi-cluster",children:"Multi-Cluster Architecture Blueprint"})," to better understand how VUI-Core fits into a distributed setup."]})}),"\n",(0,r.jsx)(n.h2,{id:"managing-nats-users",children:"Managing NATS Users"}),"\n",(0,r.jsxs)(n.p,{children:["In this initial release, ",(0,r.jsx)(n.strong,{children:"user authentication for NATS"})," is handled via static user credentials.",(0,r.jsx)(n.br,{}),"\n","These must be created manually and stored in a Kubernetes secret."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a temporary file called ",(0,r.jsx)(n.code,{children:"users.conf"})," with the following content:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'users = [\n  { user = "nats-Core-User", password = "nats-Core-Pwd" },\n  { user = "nats-Agent-1-User", password = "nats-Agent-1-pwd" },\n  { user = "nats-Agent-2-User", password = "nats-Agent-2-pwd" },\n  { user = "nats-Agent-3-User", password = "nats-Agent-3-pwd" },\n]\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Create the Kubernetes secret from this file:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl create secret generic vui-nats-user-auth \\\n  --from-file=users.conf=./tmp/users.conf \\\n  -n vui \\\n  --dry-run=client -o yaml -n vui | kubectl apply -f -\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udd04 The NATS service includes a sidecar that watches this secret and automatically reloads its configuration.",(0,r.jsx)(n.br,{}),"\n","You ",(0,r.jsx)(n.strong,{children:"do not need to restart any pods"})," when updating cluster credentials."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ingress or NodePort access to expose the UI and API"}),"\n",(0,r.jsxs)(n.li,{children:["A static IP for ",(0,r.jsx)(n.code,{children:"natsService"})," (recommended for stable multi-cluster communication)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Use the predefined override file:",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.a,{href:"https://github.com/seriohub/velero-helm/blob/main/examples/overrides/core.yaml",children:(0,r.jsx)(n.code,{children:"core.yaml"})})]}),"\n",(0,r.jsx)(n.p,{children:"Minimal required configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"global:\n  veleroNamespace: <your-velero-namespace>\n  clusterName: <core-cluster-name>\n  core: true\n\napiService:\n  secret:\n    defaultAdminUsername: <admin>\n    defaultAdminPassword: <password>\n    natsUsername: <nats-Agent-1-User>\n    natsPassword: <nats-Agent-1-Pwd>\n\ncoreService:\n  secret:\n    clientKey: <client-key>\n    defaultAdminUsername: <admin>\n    defaultAdminPassword: <password>\n    natsUsername: <nats-Core-User>\n    natsPassword: <nats-Core-Pwd>\n\nexposure:\n  mode: ingress\n  ingress:\n    spec:\n      tls:\n        - hosts:\n            - vui-core.yourdomain.com\n\nnatsService:\n  loadBalancerIP: <ip>\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Credentials",type:"tip",children:[(0,r.jsx)(n.p,{children:"Login to the UI with the credentials defined in:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Username"}),": ",(0,r.jsx)(n.code,{children:"coreService.secret.defaultAdminUsername"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Password"}),": ",(0,r.jsx)(n.code,{children:"coreService.secret.defaultAdminPassword"})]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"helm repo add seriohub https://seriohub.github.io/velero-helm\nhelm repo update\n\nhelm install vui seriohub/vui \\\n-n vui \\\n--create-namespace \\\n-f core.yaml\n"})}),"\n",(0,r.jsx)(n.h2,{id:"access",children:"Access"}),"\n",(0,r.jsx)(n.p,{children:"Once deployed, the UI will be accessible at:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"https://vui-core.yourdomain.com\n"})}),"\n",(0,r.jsx)(n.p,{children:"Use the Core dashboard to manage and monitor multiple remote clusters using Agent installations."}),"\n",(0,r.jsx)(n.h2,{id:"additional-useful-override-files",children:"Additional Useful Override Files"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.a,{href:"https://github.com/seriohub/velero-helm/tree/main/examples/overrides",children:(0,r.jsx)(n.code,{children:"velero-helm"})})," repository includes other override files for alternative use cases:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/seriohub/velero-helm/blob/main/examples/overrides/core-ldap.yaml",children:(0,r.jsx)(n.code,{children:"core-ldap.yaml"})})," \u2014 Enables LDAP authentication"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["By default, NATS is configured to use the ",(0,r.jsx)(n.code,{children:"nats"})," protocol (non-TLS)."]}),"\n",(0,r.jsx)(n.li,{children:"NATS supports TLS, but enabling it depends on the network and ingress configuration."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"loadbalancer-ip-configuration",children:"LoadBalancer IP Configuration"}),"\n",(0,r.jsx)(n.p,{children:"If your environment does not allow reserving a static LoadBalancer IP ahead of time, you can retrieve it after deployment and update the chart:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Get the assigned IP:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl get svc -n vui -o jsonpath=\"{.items[?(@.spec.type=='LoadBalancer')].status.loadBalancer.ingress[0].ip}\"\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Update the deployment with the resolved IP:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"helm upgrade vui ./chart/ -f core.yaml --set natsService.loadBalancerIP=<resolved-ip>\n\nkubectl rollout restart deployment -l component=api -n vui\nkubectl rollout restart deployment -l component=core -n vui\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);