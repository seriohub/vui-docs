"use strict";(self.webpackChunkvelero_docs=self.webpackChunkvelero_docs||[]).push([[9611],{5777:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/installation/docker-compose-installation","title":"Docker Compose Installation \u2013 Run VUI Locally outside Kubernetes","description":"Set up VUI locally using Docker Compose.","source":"@site/docs/getting-started/installation/docker-compose.md","sourceDirName":"getting-started/installation","slug":"/getting-started/installation/docker-compose-installation","permalink":"/docs/getting-started/installation/docker-compose-installation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"docker-compose-installation","title":"Docker Compose Installation \u2013 Run VUI Locally outside Kubernetes","description":"Set up VUI locally using Docker Compose.","keywords":["VUI","Velero","Docker Compose","local installation","VUI API","VUI UI","Kubernetes alternative","VUI testing"],"sidebar_label":"Docker Compose","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Agent Only","permalink":"/docs/getting-started/installation/scenarios/agent-only-installation"},"next":{"title":"Configuration","permalink":"/docs/getting-started/installation/configuration"}}');var s=o(4848),i=o(8453);const r={id:"docker-compose-installation",title:"Docker Compose Installation \u2013 Run VUI Locally outside Kubernetes",description:"Set up VUI locally using Docker Compose.",keywords:["VUI","Velero","Docker Compose","local installation","VUI API","VUI UI","Kubernetes alternative","VUI testing"],sidebar_label:"Docker Compose",sidebar_position:3},l="Docker Compose Installation",a={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Default Credentials",id:"default-credentials",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker-compose-installation",children:"Docker Compose Installation"})}),"\n",(0,s.jsxs)(n.p,{children:["This deployment allows you to launch the ",(0,s.jsx)(n.strong,{children:"VUI"})," components on your local machine without needing a Kubernetes cluster."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Docker installed and running"}),"\n",(0,s.jsx)(n.li,{children:"Docker Compose (v2+ recommended)"}),"\n",(0,s.jsxs)(n.li,{children:["A valid ",(0,s.jsx)(n.code,{children:"kubeconfig"})," file from a Velero-enabled cluster"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a file named ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})," with the following content:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'services:\n  api:\n    image: dserio83/velero-api:0.2.7\n    working_dir: /app\n    networks:\n      - vui\n    volumes:\n      - /absolute/path/to/your/kubeconfig.yaml:/root/.kube/config\n    environment:\n      API_ENDPOINT_URL: "0.0.0.0"\n      API_ENDPOINT_PORT: "8001"\n      API_RATE_LIMITER_L1: "60:200"\n      API_RATE_LIMITER_CUSTOM_1: "Security:xxx:60:20"\n      AUTH_ENABLED: "true"\n      DEFAULT_ADMIN_USERNAME: "admin"\n      DEFAULT_ADMIN_PASSWORD: "admin"\n      API_TOKEN_EXPIRATION_MIN: "180"\n      API_TOKEN_REFRESH_EXPIRATION_DAYS: "7"\n      K8S_IN_CLUSTER_MODE: "False"\n      K8S_VELERO_NAMESPACE: "velero"\n      KUBE_CONFIG_FILE: "/root/.kube/config"\n      ORIGINS_1: "http://127.0.0.1:8003"\n      ORIGINS_2: "http://localhost:8003"\n      CLUSTER_ID: "local-develop-cluster"\n      DOWNLOAD_INSPECT_FOLDER: "/tmp/velero-inspect-backups"\n      RESTIC_PASSWORD: "static-passw0rd"\n      WATCHDOG_URL: "vui-watchdog"\n      WATCHDOG_PORT: "8002"\n    ports:\n      - "8001:8001"\n\n  vui-watchdog:\n    image: dserio83/velero-watchdog:0.1.8\n    restart: always\n    working_dir: /app\n    networks:\n      - vui\n    volumes:\n      - /absolute/path/to/your/kubeconfig.yaml:/root/.kube/config\n    environment:\n      API_ENDPOINT_URL: "0.0.0.0"\n      API_ENDPOINT_PORT: "8002"\n      K8S_IN_CLUSTER_MODE: "false"\n      K8S_VELERO_NAMESPACE: "velero"\n      PROCESS_LOAD_KUBE_CONFIG: "true"\n      PROCESS_KUBE_CONFIG: "/root/.kube/config"\n      CLUSTER_ID: "cluster-backend-name"\n      PROCESS_CYCLE_SEC: "1800"\n      APPRISE: ""\n    ports:\n      - "8002:8002"\n      \n  ui:\n    image: dserio83/velero-ui:0.2.7\n    working_dir: /app\n    networks:\n      - vui\n    depends_on:\n      - api\n    environment:\n      NEXT_PUBLIC_REFRESH_DATATABLE_AFTER: "1500"\n      NEXT_PUBLIC_REFRESH_RECENT: "5000"\n      NEXT_PUBLIC_VELERO_API_NAME: "cluster-backend-name"\n      NEXT_PUBLIC_VELERO_API_URL: "http://127.0.0.1:8001/api"\n      NEXT_PUBLIC_VELERO_API_WS: "ws://127.0.0.1:8001"\n      NEXT_PUBLIC_AUTH_ENABLED: "true"\n      NEXT_PUBLIC_INSPECT_BACKUP_ENABLED: "true"\n    ports:\n      - "8003:3000"\n      \nnetworks:\n  vui:\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udcdd Replace ",(0,s.jsx)(n.code,{children:"/absolute/path/to/your/kubeconfig.yaml"})," with the full path to your local kubeconfig file.",(0,s.jsx)(n.br,{}),"\n","The Velero API will use this to connect to your cluster."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Start the services:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"docker compose up\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Open the UI in your browser:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"http://localhost:8003\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"default-credentials",children:"Default Credentials"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Username"}),": ",(0,s.jsx)(n.code,{children:"admin"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Password"}),": ",(0,s.jsx)(n.code,{children:"admin"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"vui-api"})," service runs on port ",(0,s.jsx)(n.code,{children:"8001"})," and communicates with your Velero instance using your local kubeconfig"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"vui-ui"})," runs on port ",(0,s.jsx)(n.code,{children:"3000"})," and connects to the API via network (",(0,s.jsx)(n.code,{children:"127.0.0.1:8001"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"No persistent storage is used; data is lost when containers are removed"}),"\n",(0,s.jsxs)(n.li,{children:["The Watchdog component is ",(0,s.jsx)(n.strong,{children:"not compatible"})," with Docker Compose and is omitted"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udd12 For secure environments or public exposure, use the ",(0,s.jsx)(n.a,{href:"/docs/getting-started/installation/helm-installation",children:"Helm-based Kubernetes installation"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>l});var t=o(6540);const s={},i=t.createContext(s);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);